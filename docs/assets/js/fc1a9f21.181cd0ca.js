"use strict";(self.webpackChunkqq_x=self.webpackChunkqq_x||[]).push([[650],{7547:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/disk-size-analysis-and-snapshot-management-e633e1113daaab06454b0adb8cf118bb.jpg"},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>r});var s=i(6540);const t={},a=s.createContext(t);function o(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(a.Provider,{value:n},e.children)}},8893:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Advanced/Disks-and-Resizing","title":"Disks, Resizing and Partition Management","description":"How to easily manage Quickemu type qcow2 disks and disk partitions","source":"@site/docs/Advanced/Disks-and-Resizing.md","sourceDirName":"Advanced","slug":"/Advanced/Disks-and-Resizing","permalink":"/qqX/docs/Advanced/Disks-and-Resizing","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Disks, Resizing and Partition Management","description":"How to easily manage Quickemu type qcow2 disks and disk partitions"},"sidebar":"advancedSidebar","next":{"title":"Custom Menus","permalink":"/qqX/docs/Advanced/Custom-Menus"}}');var t=i(4848),a=i(8453);const o={sidebar_position:5,title:"Disks, Resizing and Partition Management",description:"How to easily manage Quickemu type qcow2 disks and disk partitions"},r=void 0,d={},l=[{value:"Ideally",id:"ideally",level:2},{value:"SHARED or SECOND DRIVES",id:"shared-or-second-drives",level:2},{value:"ACCESS",id:"access",level:2},{value:"RESIZING",id:"resizing",level:2},{value:"BOOTING from ISO&#39;s",id:"booting-from-isos",level:3},{value:"Other Tools",id:"other-tools",level:3},{value:"Transferring virtual machines",id:"transferring-virtual-machines",level:3}];function h(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"ideally",children:"Ideally"}),"\n",(0,t.jsx)(n.p,{children:"the Virtual Machine should have been allocated a generous size from the outset. But things aren't always that way ..."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"disk-size-analysis-and-snapshot-management",src:i(7547).A+"",width:"952",height:"848"})}),"\n",(0,t.jsx)(n.p,{children:"Select the VM in the normal way and open the Utils menu [u]"}),"\n",(0,t.jsx)(n.p,{children:"From the settings file:"}),"\n",(0,t.jsx)(n.h2,{id:"shared-or-second-drives",children:"SHARED or SECOND DRIVES"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The Shared drive is a useful when in SDL mode & available to all VMs while a Second drive is a quick way to expand\nan individual VM's storage. Use Gparted, 'Disks' or similar, inside a VM, to set a file table, format and mount."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Give SharedDrive ",(0,t.jsx)(n.em,{children:"full"}),' location here  eg. ="$Default_VM_Folder/SharedDrive/shared.qcow2"\nSET SharedDrive_Conf as ="no-shared" IN THE .CONF FILE to individually stop the Shared Drive from loading\nSharedDrive=""']}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"For WINDOWS, the drive should be set as GPT & formatted as NTFS."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Set up NTFS drives using a Linux OS and gparted but optimize (defrag) the disk using Windows"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"See resize notes for mounting workarounds"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["MAC OS older than and including 10.13 Mojave 2018 ",(0,t.jsx)(n.em,{children:"might"})," need a flag IN THE .CONF FILE to stop possible drive conflicts."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Quickemu code has the following note: \"VirtIO Block Media doesn't work in High Sierra (at all) or the Mojave (Recovery Image)\"\nDevelopment tests with Mojave show both a Shared NTFS and a Second APFS to be working.\nSET MacLegacyDrive as =\"true\" to load Second Drive (& not Shared) as 'ide-hd' instead of 'virtio-blk-pci'\nSharedDrive always loads as 'virtio-blk-pci'   See ",(0,t.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/MacOS_version_history",children:"https://en.wikipedia.org/wiki/MacOS_version_history"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'qqX adds SecondDrives to the .CONF FILE, eg as ="Windows-11/storage.qcow2"'}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"access",children:"ACCESS"}),"\n",(0,t.jsx)(n.p,{children:"qqX version 1.11 adds the ability to mount and view qcow2 drives within the host's file manager"}),"\n",(0,t.jsxs)(n.p,{children:["If your drives only have ",(0,t.jsx)(n.code,{children:"root"})," access, the following commands can help give general user permissions:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'sudo chown $USER:$USER "mounted-drive-name"\n\nchmod 775 "mounted-drive-name"\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"Gnome Disks has a neat 'take ownership' option:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/user-attachments/assets/e81e6933-d5ff-48d4-9e1f-20f65407677e",alt:"second-disk-take-ownership-1280"})}),"\n",(0,t.jsx)(n.h2,{id:"resizing",children:"RESIZING"}),"\n",(0,t.jsx)(n.p,{children:"Use the [disk] option to resize."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Second drives should be followed up by adjustments using Gparted from inside the Linux VM."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Gparted will auto-detect the change in envelope size and auto offer to 'fix' things.  KDE partition manager may not do this and will need the partition deleting in order to reach the new envelope size. This software is not always installed and may need to be added."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"A workaround for KDE distros can be to copy the disks to a Gnome based distro VM folder, then mount them as Gnome second drives. Even a simple Live ISO is sufficient, as long as the .conf has the Drive added to it."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"This workaround should function with main drives too, including Windows."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Or not. Sometimes only Windows will fix NTFS, even if Gparted has already done the main lifting. Windows has 'Check and repair' plus 'Defrag' and Trim functions that can fix things sometimes where others can't."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/user-attachments/assets/4a338f4b-25d7-488e-9f69-10410012dcfb",alt:"shared-ntfs-checked-defragged-windows"})}),"\n",(0,t.jsx)(n.h3,{id:"booting-from-isos",children:"BOOTING from ISO's"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"An in-menu ISO boot is now possible from version 1.9.03"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"And a space saving shared Boot ISO option is now possible from 1.11.05 onwards"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"See the [iso] utility from the main menu."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["By pressing the 'esc' key during initial boot, you can access the Tiano boot manager and boot from any 'live boot' ISO, such as the one from ",(0,t.jsx)(n.a,{href:"https://gparted.org/download.php",children:"https://gparted.org/download.php"})]}),"\n",(0,t.jsx)(n.h3,{id:"other-tools",children:"Other Tools"}),"\n",(0,t.jsx)(n.p,{children:"Release 1.1.05 added an extra layer of qemu-img disk health checks to the disk info function."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/TuxVinyards/qqX/assets/3956806/7edf972c-3c18-4f33-8096-2c1cbc5ba4f5",alt:"disk error alert crop"})}),"\n",(0,t.jsx)(n.p,{children:"Release 1.11.02 added a utility to mount qcow2 disks in the host filemanager"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://github.com/user-attachments/assets/91cc82cd-1d89-4824-a7be-b9466bef7a81",alt:"qqX-qcow2-mount-in-filemanager"})}),"\n",(0,t.jsx)(n.h3,{id:"transferring-virtual-machines",children:"Transferring virtual machines"}),"\n",(0,t.jsx)(n.p,{children:"A method of converting VMs from or to lib-virt based environments, such as Gnome Boxes or Virt-Manager, is still a work in progress which is hoped to be resolved."})]})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);